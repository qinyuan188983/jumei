"use strict";var cartList=JSON.parse(localStorage.getItem("cartList")),selectNum=0,Allshop=0,Allmoney=0;$(function(){$(".shop>.shop-top>#all").click(function(){console.log($(".shop>.shop-top>#all")),$(".shop>.cont>.btn1").prop("checked",this.checked)}),$(".shop>.cont>.btn1").click(function(){$(".shop>.shop-top>#all").prop("checked",[].every.call($(".shop>.cont>.btn1"),function(n,s){return!0===n.checked}))}),cartList?($(".without").css("display","none"),$(".shop").css("display","block"),$(".result").css("display","block")):($(".without").css("display","block"),$(".shop").css("display","none"),$(".result").css("display","none")),$(".cont").on("click",".del",function(){var n,s=$(this).parent().attr("id");console.log("把数组中 id 为 : "+s+" 的数去去掉, 从新渲染页面, 从新存储到 lcoalStorage");for(var l=0;l<cartList.length;l++)cartList[l].id==s&&(console.log(cartList[l].id),n=l);cartList.splice(n,n+1),console.log(cartList),localStorage.setItem("cartList",JSON.stringify(cartList)),Allmoney=Allshop=0,$.ajax({url:"../lib/kh-list.json",dataType:"json",success:function(l){Allshop++,Allmoney+=item.kh_price*list.number;var t="";console.log(cartList),cartList.forEach(function(s){l.forEach(function(n){n.kh_id==s.id&&(t+='\n                            \n                        <div class="cont" id="'.concat(s.id,'">\n                            <input type="checkbox" class="fl btn1">\n                            <img class="fl" src="').concat(n.kh_img,'" alt="">\n                            <p class="xiangqing fl">\n                                <span class="jisu1">\n                                    [极速免税]\n                                </span>\n                                <span class="jisu2">').concat(n.kh_name,'</span>\n                            </p>\n                            <div class="price fl">').concat(n.kh_price,'</div>\n                            <div class="num fl">\n                                <input type="button" class="btn btn-default" value="-"></button>\n                                <input type="text" class="shuliang" value=').concat(s.number,'></input>\n                                <input type="button" class="btn btn-default" value="+"></button>\n                            </div>\n                            <div class="xiaoji fl">').concat(n.kh_price*s.number,'</div>\n                            <span class="fl del btn glyphicon glyphicon-trash"></span>\n                        </div>'))});var n='\n                    <div class="shop-top">\n                    <input class="fl" id="all" type="checkbox">\n                    <span class="fl span1">聚美优品发货</span>\n                    <span class="fl span2">聚美价</span>\n                    <span class="fl span3">数量</span>\n                    <span class="fl span4">小计(元)</span>\n                    <span class="fl span5">操作</span>\n                    </div>';n+=t,$(".shop").html(n)})}}),$(".result>.zongshu>.num").text(Allshop),$(".result>.gongji>.num").text(Allmoney)})}),$.ajax({url:"../lib/kh-list.json",dataType:"json",success:function(l){var t="";console.log(cartList),cartList.forEach(function(s){l.forEach(function(n){n.kh_id==s.id&&(Allshop++,Allmoney+=n.kh_price*s.number,t+='\n                    \n                <div class="cont" id="'.concat(s.id,'">\n                    <input type="checkbox" class="fl btn1">\n                    <img class="fl" src="').concat(n.kh_img,'" alt="">\n                    <p class="xiangqing fl">\n                        <span class="jisu1">\n                            [极速免税]\n                        </span>\n                        <span class="jisu2">').concat(n.kh_name,'</span>\n                    </p>\n                    <div class="price fl">').concat(n.kh_price,'</div>\n                    <div class="num fl">\n                        <input type="button" class="btn btn-default" value="-"></button>\n                        <input type="text" class="shuliang" value=').concat(s.number,'></input>\n                        <input type="button" class="btn btn-default" value="+"></button>\n                    </div>\n                    <div class="xiaoji fl">').concat(n.kh_price*s.number,'</div>\n                    <span class="fl del btn glyphicon glyphicon-trash"></span>\n                </div>'))});var n='\n            <div class="shop-top">\n            <input class="fl" id="all" type="checkbox">\n            <span class="fl span1">聚美优品发货</span>\n            <span class="fl span2">聚美价</span>\n            <span class="fl span3">数量</span>\n            <span class="fl span4">小计(元)</span>\n            <span class="fl span5">操作</span>\n            </div>';n+=t,$(".shop").html(n),$(".result>.zongshu>.num").text(Allshop),$(".result>.gongji>.num").text(Allmoney)})}});